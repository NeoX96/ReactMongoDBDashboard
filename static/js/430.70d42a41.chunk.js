"use strict";(self.webpackChunkreact_admin=self.webpackChunkreact_admin||[]).push([[430],{657:function(t,e,n){var r=n(3433),i=n(4165),a=n(5861),o=n(9439),u=n(2242),s=n(1607),c=n(3967),h=n(2791),f=n(8846),l=n(184);e.Z=function(){var t=(0,c.Z)(),e=(0,s.TV)(t.palette.mode),n=(0,h.useState)([{id:"0",value:0}]),p=(0,o.Z)(n,2),x=p[0],d=p[1];return(0,h.useEffect)((function(){var t=function(){var t=(0,a.Z)((0,i.Z)().mark((function t(){var e;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,f.G)();case 2:e=t.sent,d(e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[]),(0,h.useEffect)((function(){var t=function(){var t=(0,a.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(0,f.kv)((function(t){var e=x.findIndex((function(e){return e.id===t.ShopName}));if(e>=0){var n=(0,r.Z)(x);n[e]={id:t.ShopName,value:t.Revenue},d(n)}}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();x.length>0&&t()}),[x]),(0,l.jsx)(u.mj,{data:x,theme:{axis:{domain:{line:{stroke:e.grey[100]}},legend:{text:{fill:e.grey[100]}},ticks:{line:{stroke:e.grey[100],strokeWidth:1},text:{fill:e.grey[100]}}},legends:{text:{fill:e.grey[100]}},tooltip:{container:{background:e.grey[900],color:e.grey[100]}}},margin:{top:5,right:5,bottom:20,left:20},valueFormat:">-.3s",colors:{scheme:"paired"},borderWidth:8,labelColor:{from:"color",modifiers:[["darker",3]]},beforeSeparatorLength:5,beforeSeparatorOffset:5,afterSeparatorLength:5,afterSeparatorOffset:5,currentPartSizeExtension:15,currentBorderWidth:8,motionConfig:"wobbly"})}},7084:function(t,e,n){var r=n(3967),i=n(4554),a=n(890),o=n(1607),u=n(184);e.Z=function(t){var e=t.title,n=t.subtitle,s=(0,r.Z)(),c=(0,o.TV)(s.palette.mode);return(0,u.jsxs)(i.Z,{mb:"30px",children:[(0,u.jsx)(a.Z,{variant:"h2",color:c.grey[100],fontWeight:"bold",sx:{m:"0 0 5px 0"},children:e}),(0,u.jsx)(a.Z,{variant:"h5",color:c.greenAccent[400],children:n})]})}},8846:function(t,e,n){n.d(e,{Df:function(){return Z},G:function(){return g},gf:function(){return m},kv:function(){return v}});var r=n(4165),i=n(5861),a=n(6296),o=n(2178),u="DBDatabase",s="Top10",c="10Shops",h=new o.gV("data-uilqj"),f=o.cN.apiKey("7PodJEFumzYtvIBgsWkiBMp5N1ifzHkrRMO9XTvRSxVBH5TIq5kJdXhLxE7RKWKM");function l(){return p.apply(this,arguments)}function p(){return(p=(0,i.Z)((0,r.Z)().mark((function t(){var e,n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,h){t.next=4;break}return console.error("app is not defined"),t.abrupt("return");case 4:return t.next=6,h.logIn(f);case 6:return(n=t.sent).id!==(null===(e=h.currentUser)||void 0===e?void 0:e.id)&&console.error("User is not logged in"),console.log("User logged in:",n),t.abrupt("return",n);case 12:t.prev=12,t.t0=t.catch(0),console.error("Failed to log in",t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))).apply(this,arguments)}function x(){return d.apply(this,arguments)}function d(){return(d=(0,i.Z)((0,r.Z)().mark((function t(){var e,n,i,a,o;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(e=h.currentUser)||void 0===e){t.next=4;break}t.t0=e,t.next=7;break;case 4:return t.next=6,l();case 6:t.t0=t.sent;case 7:if(n=t.t0,i=n.mongoClient(u),a=i.db(s)){t.next=12;break}throw new Error("Failed to connect to database ".concat(s));case 12:if(o=a.collection(c)){t.next=15;break}throw new Error("Failed to connect to collection ".concat(c));case 15:return t.abrupt("return",o);case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(t){return _.apply(this,arguments)}function _(){return(_=(0,i.Z)((0,r.Z)().mark((function t(e){var n,i,o,u,s,c,h,f,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x();case 3:return n=t.sent,t.next=6,n.watch();case 6:i=t.sent,o=!1,u=!1,t.prev=9,c=(0,a.Z)(i);case 11:return t.next=13,c.next();case 13:if(!(o=!(h=t.sent).done)){t.next=23;break}return f=h.value,t.next=17,n.findOne({_id:f.documentKey._id});case 17:l=t.sent,"function"===typeof e&&e(l),console.log("Data changed:",l);case 20:o=!1,t.next=11;break;case 23:t.next=29;break;case 25:t.prev=25,t.t0=t.catch(9),u=!0,s=t.t0;case 29:if(t.prev=29,t.prev=30,!o||null==c.return){t.next=34;break}return t.next=34,c.return();case 34:if(t.prev=34,!u){t.next=37;break}throw s;case 37:return t.finish(34);case 38:return t.finish(29);case 39:return t.abrupt("return",(function(){i.close()}));case 42:t.prev=42,t.t1=t.catch(0),console.error("Failed to watch collection",t.t1);case 45:case"end":return t.stop()}}),t,null,[[0,42],[9,25,29,39],[30,,34,38]])})))).apply(this,arguments)}function g(){return y.apply(this,arguments)}function y(){return(y=(0,i.Z)((0,r.Z)().mark((function t(){var e,n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:return e=t.sent,t.next=5,e.aggregate([{$sort:{Revenue:-1}},{$project:{_id:0,id:"$ShopName",label:"$ShopName",value:"$Revenue"}}]);case 5:return n=t.sent,t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Z(){return b.apply(this,arguments)}function b(){return(b=(0,i.Z)((0,r.Z)().mark((function t(){var e,n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:return e=t.sent,t.next=5,e.aggregate([{$group:{_id:null,sum:{$sum:"$Revenue"}}}]);case 5:return n=t.sent,t.abrupt("return",n[0].sum);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function m(){return k.apply(this,arguments)}function k(){return(k=(0,i.Z)((0,r.Z)().mark((function t(){var e,n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:return e=t.sent,t.next=5,e.aggregate([{$project:{ShopName:1,Country:1,Revenue:1,Year:1}},{$sort:{Revenue:-1}}]);case 5:return n=t.sent,console.log("DataShops:",n),t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},4367:function(t,e,n){n.r(e);var r=n(4554),i=n(7084),a=n(657),o=n(184);e.default=function(){return(0,o.jsxs)(r.Z,{m:"20px",children:[(0,o.jsx)(i.Z,{title:"Funnel Chart",subtitle:"Simple Funnel Chart"}),(0,o.jsx)(r.Z,{height:"75vh",children:(0,o.jsx)(a.Z,{})})]})}},3339:function(t,e){var n=Math.PI,r=2*n,i=1e-6,a=r-i;function o(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function u(){return new o}o.prototype=u.prototype={constructor:o,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,r,a,o){t=+t,e=+e,r=+r,a=+a,o=+o;var u=this._x1,s=this._y1,c=r-t,h=a-e,f=u-t,l=s-e,p=f*f+l*l;if(o<0)throw new Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(p>i)if(Math.abs(l*c-h*f)>i&&o){var x=r-u,d=a-s,v=c*c+h*h,_=x*x+d*d,g=Math.sqrt(v),y=Math.sqrt(p),Z=o*Math.tan((n-Math.acos((v+p-_)/(2*g*y)))/2),b=Z/y,m=Z/g;Math.abs(b-1)>i&&(this._+="L"+(t+b*f)+","+(e+b*l)),this._+="A"+o+","+o+",0,0,"+ +(l*x>f*d)+","+(this._x1=t+m*c)+","+(this._y1=e+m*h)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,o,u,s,c){t=+t,e=+e,c=!!c;var h=(o=+o)*Math.cos(u),f=o*Math.sin(u),l=t+h,p=e+f,x=1^c,d=c?u-s:s-u;if(o<0)throw new Error("negative radius: "+o);null===this._x1?this._+="M"+l+","+p:(Math.abs(this._x1-l)>i||Math.abs(this._y1-p)>i)&&(this._+="L"+l+","+p),o&&(d<0&&(d=d%r+r),d>a?this._+="A"+o+","+o+",0,1,"+x+","+(t-h)+","+(e-f)+"A"+o+","+o+",0,1,"+x+","+(this._x1=l)+","+(this._y1=p):d>i&&(this._+="A"+o+","+o+",0,"+ +(d>=n)+","+x+","+(this._x1=t+o*Math.cos(s))+","+(this._y1=e+o*Math.sin(s))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}},e.Z=u},6344:function(t,e,n){n.d(e,{Z:function(){return u}});var r=n(3339),i=n(2084),a=n(8146),o=n(5402);function u(){var t=o.x,e=o.y,n=(0,i.Z)(!0),u=null,s=a.Z,c=null;function h(i){var a,o,h,f=i.length,l=!1;for(null==u&&(c=s(h=(0,r.Z)())),a=0;a<=f;++a)!(a<f&&n(o=i[a],a,i))===l&&((l=!l)?c.lineStart():c.lineEnd()),l&&c.point(+t(o,a,i),+e(o,a,i));if(h)return c=null,h+""||null}return h.x=function(e){return arguments.length?(t="function"===typeof e?e:(0,i.Z)(+e),h):t},h.y=function(t){return arguments.length?(e="function"===typeof t?t:(0,i.Z)(+t),h):e},h.defined=function(t){return arguments.length?(n="function"===typeof t?t:(0,i.Z)(!!t),h):n},h.curve=function(t){return arguments.length?(s=t,null!=u&&(c=s(u)),h):s},h.context=function(t){return arguments.length?(null==t?u=c=null:c=s(u=t),h):u},h}},5402:function(t,e,n){function r(t){return t[0]}function i(t){return t[1]}n.d(e,{x:function(){return r},y:function(){return i}})}}]);
//# sourceMappingURL=430.70d42a41.chunk.js.map