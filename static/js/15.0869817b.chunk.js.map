{"version":3,"file":"static/js/15.0869817b.chunk.js","mappings":"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","sources":["components/Header.jsx","components/PieChart.jsx","data/shopsData_live.js","scenes/pie.jsx"],"sourcesContent":["import { Typography, Box, useTheme } from \"@mui/material\";\r\nimport { tokens } from \"../theme\";\r\n\r\nconst Header = ({ title, subtitle }) => {\r\n  const theme = useTheme();\r\n  const colors = tokens(theme.palette.mode);\r\n  return (\r\n    <Box mb=\"30px\">\r\n      <Typography\r\n        variant=\"h2\"\r\n        color={colors.grey[100]}\r\n        fontWeight=\"bold\"\r\n        sx={{ m: \"0 0 5px 0\" }}\r\n      >\r\n        {title}\r\n      </Typography>\r\n      <Typography variant=\"h5\" color={colors.greenAccent[400]}>\r\n        {subtitle}\r\n      </Typography>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import { ResponsivePie } from \"@nivo/pie\";\r\nimport { tokens } from \"../theme\";\r\nimport { useTheme } from \"@mui/material\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { watchCollection, getShopRevenueChartData } from \"../data/shopsData_live\";\r\n\r\nconst PieChart = ({ isDashboard = false }) => {\r\n  const theme = useTheme();\r\n  const colors = tokens(theme.palette.mode);\r\n\r\n  const [shopData, setShopData] = useState([]);\r\n\r\n\r\n\r\n\r\n  // Wird beim ersten Laden der Seite und beim Ändern der Daten in der MongoDB-Sammlung aufgerufen\r\n  useEffect(() => {\r\n\r\n    // Lädt die Daten aus der MongoDB-Sammlung\r\n    const loadData = async () => {\r\n      const data = await getShopRevenueChartData();\r\n      setShopData(data);\r\n    };\r\n\r\n    loadData();\r\n\r\n\r\n  }, []);\r\n\r\n  // Wird beim ersten Laden der Seite und beim Ändern der Daten in der MongoDB-Sammlung aufgerufen\r\n  useEffect(() => {\r\n\r\n    // Update shopData state when a shop revenue data changes in MongoDB collection\r\n    const handleChange = async () => {\r\n      watchCollection((updatedShop) => {\r\n        // Get index of updated shop in shopData array\r\n        const updatedShopIndex = shopData.findIndex((shop) => shop.id === updatedShop.ShopName);\r\n\r\n        // If updated shop is found in shopData array\r\n        if (updatedShopIndex >= 0) {\r\n          // Update shopData with new revenue data\r\n          const updatedData = [...shopData];\r\n          updatedData[updatedShopIndex] = {\r\n            id: updatedShop.ShopName,\r\n            value: updatedShop.Revenue,\r\n          };\r\n          setShopData(updatedData);\r\n        }\r\n      });\r\n    };\r\n\r\n    if (shopData.length > 0) {\r\n      handleChange();\r\n    }\r\n\r\n    \r\n  }, [shopData]);\r\n  \r\n\r\n  return (\r\n    <ResponsivePie\r\n      data={shopData}\r\n      theme={{\r\n        fontSize: isDashboard ? 12 : 14,\r\n        axis: {\r\n          domain: {\r\n            line: {\r\n              stroke: colors.grey[100],\r\n            },\r\n          },\r\n          legend: {\r\n            text: {\r\n              fill: colors.grey[100],\r\n            },\r\n          },\r\n          ticks: {\r\n            line: {\r\n              stroke: colors.grey[100],\r\n              strokeWidth: 1,\r\n            },\r\n            text: {\r\n              fill: colors.grey[100],\r\n            },\r\n          },\r\n        },\r\n        legends: {\r\n          text: {\r\n            fill: colors.grey[100],\r\n          },\r\n        },\r\n        tooltip: {\r\n          container: {\r\n            background: colors.grey[900],\r\n            color: colors.grey[100],\r\n          },\r\n        },\r\n      }}\r\n      margin={{\r\n        top: isDashboard ? 20 : 30,\r\n        right: 80,\r\n        bottom: isDashboard ? 20 : 80,\r\n        left: 80,\r\n      }}\r\n      innerRadius={0.5}\r\n      padAngle={0.7}\r\n      cornerRadius={5}\r\n      activeOuterRadiusOffset={8}\r\n      borderColor={{\r\n        from: \"color\",\r\n        modifiers: [[\"darker\", 0.2]],\r\n      }}\r\n      arcLinkLabelsSkipAngle={isDashboard ? 12 : 9}\r\n      arcLinkLabelsTextColor={colors.grey[100]}\r\n      arcLinkLabelsThickness={2}\r\n      arcLinkLabelsColor={{ from: \"color\" }}\r\n      enableArcLabels={false}\r\n      colors={{ \r\n        scheme: 'paired' \r\n      }}\r\n      legends={\r\n        isDashboard\r\n          ? []\r\n          : [\r\n              {\r\n                anchor: \"bottom\",\r\n                direction: \"row\",\r\n                justify: false,\r\n                translateX: 0,\r\n                translateY: 56,\r\n                itemsSpacing: 0,\r\n                itemWidth: 120,\r\n                itemHeight: 18,\r\n                itemTextColor: \"#999\",\r\n                itemDirection: \"left-to-right\",\r\n                itemOpacity: 1,\r\n                symbolSize: 14,\r\n                symbolShape: \"circle\",\r\n                effects: [\r\n                  {\r\n                    on: \"hover\",\r\n                    style: {\r\n                      itemTextColor: \"#000\",\r\n                    },\r\n                  },\r\n                ],\r\n              },\r\n            ]\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nexport default PieChart;\r\n","import * as Realm from \"realm-web\";\r\n\r\nconst APP_ID = \"data-uilqj\";\r\nconst API_KEY = \"7PodJEFumzYtvIBgsWkiBMp5N1ifzHkrRMO9XTvRSxVBH5TIq5kJdXhLxE7RKWKM\";\r\nconst DATA_SOURCE = \"DBDatabase\";\r\nconst DATABASE_NAME = \"Top10\";\r\nconst COLLECTION_NAME = \"10Shops\";\r\n\r\n\r\nconst app = new Realm.App(APP_ID);\r\nconst credentials = Realm.Credentials.apiKey(API_KEY);\r\n\r\n/**\r\n * Loggt einen Benutzer bei der Realm-Instanz ein.\r\n *\r\n * @returns {object} Der eingeloggte Benutzer.\r\n */\r\nasync function realmLogin() {\r\n  try {\r\n    // Überprüfe, ob app definiert ist\r\n    if (!app) {\r\n      console.error(\"app is not defined\");\r\n      return;\r\n    }\r\n\r\n    const user = await app.logIn(credentials);\r\n\r\n    if (user.id !== app.currentUser?.id) {\r\n      console.error(\"User is not logged in\");\r\n    }\r\n\r\n    console.log(\"User logged in:\", user);\r\n    return user;\r\n  } catch (err) {\r\n    console.error(\"Failed to log in\", err);\r\n  }\r\n}\r\n\r\n\r\nasync function getMongoCollection() {\r\n  const user = app.currentUser ?? await realmLogin();\r\n\r\n  const mongo = user.mongoClient(DATA_SOURCE);\r\n  const db = mongo.db(DATABASE_NAME);\r\n  if (!db) {\r\n    throw new Error(`Failed to connect to database ${DATABASE_NAME}`);\r\n  }\r\n  const collection = db.collection(COLLECTION_NAME);\r\n\r\n  if (!collection) {\r\n    throw new Error(`Failed to connect to collection ${COLLECTION_NAME}`);\r\n  }\r\n\r\n  return collection;\r\n}\r\n\r\n\r\n/**\r\n * Watch a MongoDB collection for changes and call the onChange function when a document changes.\r\n * @param {function} onChange - Function to call when a document changes.\r\n * @returns {function} Function to stop watching the collection.\r\n */\r\nexport async function watchCollection(onChange) {\r\n  try {\r\n    // Get the MongoDB collection.\r\n    const collection = await getMongoCollection();\r\n    \r\n    // Create a change stream for the collection.\r\n    const changeStream = await collection.watch();\r\n\r\n    // Listen for changes in the collection.\r\n    for await (const event of changeStream) {\r\n      // Get the updated document from the collection.\r\n      const updatedDocument = await collection.findOne({ _id: event.documentKey._id });\r\n\r\n      // Call the onChange function if it is defined.\r\n      if (typeof onChange === \"function\") {\r\n        onChange(updatedDocument);\r\n      }\r\n\r\n      // Log that data has changed.\r\n      console.log(\"Data changed:\", updatedDocument);\r\n    }\r\n\r\n    // Return a function to stop watching the collection.\r\n    return () => {\r\n      changeStream.close();\r\n    };\r\n  } catch (err) {\r\n    console.error(\"Failed to watch collection\", err);\r\n    // alert(\"Failed to watch collection\", err);\r\n  }\r\n}\r\n\r\n\r\n\r\n/**\r\n * Gibt die Daten der MongoDB-Collection zurück und sortiert sie nach Revenue absteigend.\r\n *  \r\n * @returns {array} Ein Array mit den sortierten Daten der MongoDB-Collection. ShopName und Revenue\r\n *  \r\n */\r\nexport async function getShopRevenueChartData() {\r\n  const collection = await getMongoCollection();\r\n  const data = await collection.aggregate([\r\n    { $sort: { Revenue: -1 } },\r\n    {\r\n      $project: {\r\n        _id: 0,\r\n        id: \"$ShopName\",\r\n        label: \"$ShopName\",\r\n        value: \"$Revenue\",\r\n      },\r\n    },\r\n  ]);\r\n\r\n  return data;\r\n}\r\n\r\n\r\n\r\n/**\r\n * \r\n * @returns {number} Summe der Revenue\r\n */\r\nexport async function getSumOfRevenue() {\r\n  const collection = await getMongoCollection();\r\n\r\n  const data = await collection.aggregate([\r\n    { $group: { _id: null, sum: { $sum: \"$Revenue\" } } },\r\n  ]);\r\n\r\n  return data[0].sum;\r\n}\r\n\r\n/**\r\n * \r\n * @returns {Array} ShopName Country Revenue Year, sortiert nach Revenue absteigend\r\n *\r\n */\r\nexport async function getShopsData() {\r\n  const collection = await getMongoCollection();\r\n\r\n  const data = await collection.aggregate([\r\n    { $project: { ShopName: 1, Country: 1, Revenue: 1, Year: 1 } },\r\n    { $sort: { Revenue: -1 } },    \r\n  ]);\r\n\r\n  console.log(\"DataShops:\", data);\r\n  return data;\r\n}","import { Box } from \"@mui/material\";\r\nimport Header from \"../components/Header\";\r\nimport PieChart from \"../components/PieChart\";\r\n\r\nconst Pie = () => {\r\n  return (\r\n    <Box m=\"20px\">\r\n      <Header title=\"Pie Chart\" subtitle=\"Simple Pie Chart\" />\r\n      <Box height=\"75vh\">\r\n        <PieChart />\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Pie;\r\n"],"names":["_ref","title","subtitle","theme","useTheme","colors","tokens","palette","mode","_jsxs","Box","mb","children","_jsx","Typography","variant","color","grey","fontWeight","sx","m","greenAccent","_ref$isDashboard","isDashboard","_useState","useState","_useState2","_slicedToArray","shopData","setShopData","useEffect","loadData","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","wrap","_context","prev","next","getShopRevenueChartData","sent","stop","apply","arguments","handleChange","_ref3","_callee2","_context2","watchCollection","updatedShop","updatedShopIndex","findIndex","shop","id","ShopName","updatedData","_toConsumableArray","value","Revenue","length","ResponsivePie","fontSize","axis","domain","line","stroke","legend","text","fill","ticks","strokeWidth","legends","tooltip","container","background","margin","top","right","bottom","left","innerRadius","padAngle","cornerRadius","activeOuterRadiusOffset","borderColor","from","modifiers","arcLinkLabelsSkipAngle","arcLinkLabelsTextColor","arcLinkLabelsThickness","arcLinkLabelsColor","enableArcLabels","scheme","anchor","direction","justify","translateX","translateY","itemsSpacing","itemWidth","itemHeight","itemTextColor","itemDirection","itemOpacity","symbolSize","symbolShape","effects","on","style","DATA_SOURCE","DATABASE_NAME","COLLECTION_NAME","app","Realm","credentials","realmLogin","_realmLogin","_app$currentUser","user","console","error","abrupt","logIn","currentUser","log","t0","getMongoCollection","_getMongoCollection","_app$currentUser2","mongo","db","collection","mongoClient","Error","concat","_x","_watchCollection","_callee3","onChange","changeStream","_iteratorAbruptCompletion","_didIteratorError","_iteratorError","_iterator","_step","event","updatedDocument","_context3","watch","_asyncIterator","done","findOne","_id","documentKey","return","finish","close","t1","_getShopRevenueChartData","_callee4","_context4","aggregate","$sort","$project","label","getSumOfRevenue","_getSumOfRevenue","_callee5","_context5","$group","sum","$sum","getShopsData","_getShopsData","_callee6","_context6","Country","Year","Header","height","PieChart"],"sourceRoot":""}