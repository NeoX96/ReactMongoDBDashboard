"use strict";(self.webpackChunkreact_admin=self.webpackChunkreact_admin||[]).push([[667],{9878:function(e,n,t){var r=t(3433),o=t(4165),a=t(5861),i=t(9439),c=t(2949),s=t(1607),u=t(3967),l=t(2791),d=t(8846),f=t(184);n.Z=function(e){var n=e.isDashboard,t=void 0!==n&&n,p=(0,u.Z)(),h=(0,s.TV)(p.palette.mode),x=(0,l.useState)([]),g=(0,i.Z)(x,2),m=g[0],v=g[1];return(0,l.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.G)();case 2:n=e.sent,v(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,l.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.kv)((function(e){var n=m.findIndex((function(n){return n.id===e.ShopName}));if(n>=0){var t=(0,r.Z)(m);t[n]={id:e.ShopName,value:e.Revenue},v(t)}}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();m.length>0&&e()}),[m]),(0,f.jsx)(c.jM,{data:m,theme:{axis:{domain:{line:{stroke:h.grey[100]}},legend:{text:{fill:h.grey[100]}},ticks:{line:{stroke:h.grey[100],strokeWidth:1},text:{fill:h.grey[100]}}},legends:{text:{fill:h.grey[100]}},tooltip:{container:{background:h.grey[900],color:h.grey[100]}}},margin:{top:30,right:40,bottom:50,left:70},padding:.4,valueScale:{type:"linear"},indexScale:{type:"band",round:!0},colors:{scheme:"nivo"},defs:[{id:"lines",type:"patternLines",background:"inherit",color:"#eed312",rotation:-45,lineWidth:6,spacing:10}],fill:[{match:{id:"value"},id:"lines"}],borderColor:{from:"color",modifiers:[["darker","1.6"]]},axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:0,legend:t?void 0:"Shop Name",legendPosition:"middle",legendOffset:32},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:t?void 0:"Einnahmen",legendPosition:"middle",legendOffset:-55},enableLabel:!0,labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",1.6]]},animate:!0,motionStiffness:90,motionDamping:15})}},657:function(e,n,t){var r=t(3433),o=t(4165),a=t(5861),i=t(9439),c=t(2242),s=t(1607),u=t(3967),l=t(2791),d=t(8846),f=t(184);n.Z=function(){var e=(0,u.Z)(),n=(0,s.TV)(e.palette.mode),t=(0,l.useState)([{id:"0",value:0}]),p=(0,i.Z)(t,2),h=p[0],x=p[1];return(0,l.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.G)();case 2:n=e.sent,x(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,l.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,d.kv)((function(e){var n=h.findIndex((function(n){return n.id===e.ShopName}));if(n>=0){var t=(0,r.Z)(h);t[n]={id:e.ShopName,value:e.Revenue},x(t)}}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();h.length>0&&e()}),[h]),(0,f.jsx)(c.mj,{data:h,theme:{axis:{domain:{line:{stroke:n.grey[100]}},legend:{text:{fill:n.grey[100]}},ticks:{line:{stroke:n.grey[100],strokeWidth:1},text:{fill:n.grey[100]}}},legends:{text:{fill:n.grey[100]}},tooltip:{container:{background:n.grey[900],color:n.grey[100]}}},margin:{top:5,right:5,bottom:20,left:20},valueFormat:">-.3s",colors:{scheme:"paired"},borderWidth:8,labelColor:{from:"color",modifiers:[["darker",3]]},beforeSeparatorLength:20,beforeSeparatorOffset:20,afterSeparatorLength:20,afterSeparatorOffset:20,currentPartSizeExtension:15,currentBorderWidth:8,motionConfig:"wobbly"})}},7084:function(e,n,t){var r=t(3967),o=t(4554),a=t(890),i=t(1607),c=t(184);n.Z=function(e){var n=e.title,t=e.subtitle,s=(0,r.Z)(),u=(0,i.TV)(s.palette.mode);return(0,c.jsxs)(o.Z,{mb:"30px",children:[(0,c.jsx)(a.Z,{variant:"h2",color:u.grey[100],fontWeight:"bold",sx:{m:"0 0 5px 0"},children:n}),(0,c.jsx)(a.Z,{variant:"h5",color:u.greenAccent[400],children:t})]})}},1329:function(e,n,t){var r=t(3433),o=t(4165),a=t(5861),i=t(9439),c=t(3830),s=t(1607),u=t(3967),l=t(2791),d=t(8846),f=t(184);n.Z=function(e){var n=e.isDashboard,t=void 0!==n&&n,p=(0,u.Z)(),h=(0,s.TV)(p.palette.mode),x=(0,l.useState)([]),g=(0,i.Z)(x,2),m=g[0],v=g[1];return(0,l.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.G)();case 2:n=e.sent,v(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,l.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,d.kv)((function(e){var n=m.findIndex((function(n){return n.id===e.ShopName}));if(n>=0){var t=(0,r.Z)(m);t[n]={id:e.ShopName,value:e.Revenue},v(t)}}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();m.length>0&&e()}),[m]),(0,f.jsx)(c.Y2,{data:m,theme:{fontSize:t?12:14,axis:{domain:{line:{stroke:h.grey[100]}},legend:{text:{fill:h.grey[100]}},ticks:{line:{stroke:h.grey[100],strokeWidth:1},text:{fill:h.grey[100]}}},legends:{text:{fill:h.grey[100]}},tooltip:{container:{background:h.grey[900],color:h.grey[100]}}},margin:{top:t?20:30,right:80,bottom:t?20:80,left:80},innerRadius:.5,padAngle:.7,cornerRadius:5,activeOuterRadiusOffset:8,borderColor:{from:"color",modifiers:[["darker",.2]]},arcLinkLabelsSkipAngle:t?12:9,arcLinkLabelsTextColor:h.grey[100],arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},enableArcLabels:!1,colors:{scheme:"paired"},legends:t?[]:[{anchor:"bottom",direction:"row",justify:!1,translateX:0,translateY:56,itemsSpacing:0,itemWidth:120,itemHeight:18,itemTextColor:"#999",itemDirection:"left-to-right",itemOpacity:1,symbolSize:14,symbolShape:"circle",effects:[{on:"hover",style:{itemTextColor:"#000"}}]}]})}},8846:function(e,n,t){t.d(n,{Df:function(){return b},G:function(){return v},gf:function(){return k},kv:function(){return g}});var r=t(4165),o=t(5861),a=t(6296),i=t(2178),c="DBDatabase",s="Top10",u="10Shops",l=new i.gV("data-uilqj"),d=i.cN.apiKey("7PodJEFumzYtvIBgsWkiBMp5N1ifzHkrRMO9XTvRSxVBH5TIq5kJdXhLxE7RKWKM");function f(){return p.apply(this,arguments)}function p(){return(p=(0,o.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,l){e.next=4;break}return console.error("app is not defined"),e.abrupt("return");case 4:return e.next=6,l.logIn(d);case 6:return(t=e.sent).id!==(null===(n=l.currentUser)||void 0===n?void 0:n.id)&&console.error("User is not logged in"),console.log("User logged in:",t),e.abrupt("return",t);case 12:e.prev=12,e.t0=e.catch(0),console.error("Failed to log in",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function h(){return x.apply(this,arguments)}function x(){return(x=(0,o.Z)((0,r.Z)().mark((function e(){var n,t,o,a,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(n=l.currentUser)||void 0===n){e.next=4;break}e.t0=n,e.next=7;break;case 4:return e.next=6,f();case 6:e.t0=e.sent;case 7:if(t=e.t0,o=t.mongoClient(c),a=o.db(s)){e.next=12;break}throw new Error("Failed to connect to database ".concat(s));case 12:if(i=a.collection(u)){e.next=15;break}throw new Error("Failed to connect to collection ".concat(u));case 15:return e.abrupt("return",i);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return m.apply(this,arguments)}function m(){return(m=(0,o.Z)((0,r.Z)().mark((function e(n){var t,o,i,c,s,u,l,d,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h();case 3:return t=e.sent,e.next=6,t.watch();case 6:o=e.sent,i=!1,c=!1,e.prev=9,u=(0,a.Z)(o);case 11:return e.next=13,u.next();case 13:if(!(i=!(l=e.sent).done)){e.next=23;break}return d=l.value,e.next=17,t.findOne({_id:d.documentKey._id});case 17:f=e.sent,"function"===typeof n&&n(f),console.log("Data changed:",f);case 20:i=!1,e.next=11;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(9),c=!0,s=e.t0;case 29:if(e.prev=29,e.prev=30,!i||null==u.return){e.next=34;break}return e.next=34,u.return();case 34:if(e.prev=34,!c){e.next=37;break}throw s;case 37:return e.finish(34);case 38:return e.finish(29);case 39:return e.abrupt("return",(function(){o.close()}));case 42:e.prev=42,e.t1=e.catch(0),console.error("Failed to watch collection",e.t1);case 45:case"end":return e.stop()}}),e,null,[[0,42],[9,25,29,39],[30,,34,38]])})))).apply(this,arguments)}function v(){return Z.apply(this,arguments)}function Z(){return(Z=(0,o.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:return n=e.sent,e.next=5,n.aggregate([{$sort:{Revenue:-1}},{$project:{_id:0,id:"$ShopName",label:"$ShopName",value:"$Revenue"}}]);case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return y.apply(this,arguments)}function y(){return(y=(0,o.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:return n=e.sent,e.next=5,n.aggregate([{$group:{_id:null,sum:{$sum:"$Revenue"}}}]);case 5:return t=e.sent,e.abrupt("return",t[0].sum);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return w.apply(this,arguments)}function w(){return(w=(0,o.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:return n=e.sent,e.next=5,n.aggregate([{$project:{ShopName:1,Country:1,Revenue:1,Year:1}},{$sort:{Revenue:-1}}]);case 5:return t=e.sent,console.log("DataShops:",t),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},9667:function(e,n,t){t.r(n),t.d(n,{default:function(){return L}});var r=t(3433),o=t(4165),a=t(5861),i=t(9439),c=t(3967),s=t(2791),u=t.t(s,2),l=t(9120),d=t(1537),f=t(162);function p(e,n,t,r,o){var a=s.useState((function(){return o&&t?t(e).matches:r?r(e).matches:n})),c=(0,i.Z)(a,2),u=c[0],l=c[1];return(0,f.Z)((function(){var n=!0;if(t){var r=t(e),o=function(){n&&l(r.matches)};return o(),r.addListener(o),function(){n=!1,r.removeListener(o)}}}),[e,t]),u}var h=u.useSyncExternalStore;function x(e,n,t,r,o){var a=s.useCallback((function(){return n}),[n]),c=s.useMemo((function(){if(o&&t)return function(){return t(e).matches};if(null!==r){var n=r(e).matches;return function(){return n}}return a}),[a,e,r,o,t]),u=s.useMemo((function(){if(null===t)return[a,function(){return function(){}}];var n=t(e);return[function(){return n.matches},function(e){return n.addListener(e),function(){n.removeListener(e)}}]}),[a,t,e]),l=(0,i.Z)(u,2),d=l[0],f=l[1];return h(f,d,c)}var g=t(4554),m=t(890),v=t(4752),Z=t(533),b=t(1607),y=t(8439),k=t(7084),w=t(9878),S=t(1329),j=t(657),C=t(8846),R=t(184),L=function(){var e=(0,c.Z)(),n=(0,b.TV)(e.palette.mode),t=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,l.Z)(),r="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,o=(0,d.Z)({name:"MuiUseMediaQuery",props:n,theme:t}),a=o.defaultMatches,i=void 0!==a&&a,c=o.matchMedia,s=void 0===c?r?window.matchMedia:null:c,u=o.ssrMatchMedia,f=void 0===u?null:u,g=o.noSsr,m=void 0!==g&&g,v="function"===typeof e?e(t):e;return v=v.replace(/^@media( ?)/m,""),(void 0!==h?x:p)(v,i,s,f,m)}("(max-width:768px)"),u=(0,s.useState)([]),f=(0,i.Z)(u,2),L=f[0],M=f[1],N=(0,s.useState)(0),W=(0,i.Z)(N,2),E=W[0],T=W[1],D=(0,s.useState)(!1),z=(0,i.Z)(D,2),A=z[0],I=z[1],O=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var n,t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.gf)();case 2:return n=e.sent,e.next=5,(0,C.Df)();case 5:t=e.sent,console.log("inital: ",n),M(n),T(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,C.kv)((function(e){var n=L.findIndex((function(n){return n.ShopName===e.ShopName}));if(console.log("ShopUpdated",n),n>=0){var t=(0,r.Z)(L);t[n]=e,M(t),I(!0)}})),!A){e.next=7;break}return e.next=4,(0,C.Df)();case 4:n=e.sent,T(n),I(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){O()}),[]),(0,s.useEffect)((function(){L.length>0&&V()}),[L]),(0,R.jsxs)(g.Z,{m:"20px",children:[(0,R.jsx)(g.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:(0,R.jsx)(k.Z,{title:"Dashboard",subtitle:"Valentin"})}),(0,R.jsxs)(g.Z,{display:"grid",gridTemplateColumns:t?"repeat(6, 1fr)":"repeat(12, 1fr)",gridAutoRows:"140px",gap:"20px",children:[(0,R.jsxs)(g.Z,{gridColumn:"span 8",gridRow:"span 2",backgroundColor:n.primary[400],boxShadow:1,borderRadius:"10px",children:[(0,R.jsxs)(g.Z,{mt:"25px",p:"0 30px",display:"flex ",justifyContent:"space-between",alignItems:"center",children:[(0,R.jsxs)(g.Z,{children:[(0,R.jsx)(m.Z,{variant:"h5",fontWeight:"600",color:n.grey[100],children:"Gesmte Einnahmen"}),(0,R.jsxs)(m.Z,{variant:"h3",fontWeight:"bold",color:n.greenAccent[500],children:[E," Mio. \u20ac"]})]}),(0,R.jsx)(g.Z,{children:(0,R.jsx)(v.Z,{children:(0,R.jsx)(y.Z,{sx:{fontSize:"26px",color:n.greenAccent[500]}})})})]}),(0,R.jsx)(g.Z,{height:"250px",m:"-20px 0 0 0",children:(0,R.jsx)(w.Z,{})})]}),(0,R.jsxs)(g.Z,{gridColumn:"span 4",gridRow:"span 2",backgroundColor:n.primary[400],overflow:"auto",boxShadow:1,borderRadius:"10px",children:[(0,R.jsx)(g.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"4px solid ".concat(n.primary[500]),colors:n.grey[100],p:"15px",children:(0,R.jsx)(m.Z,{color:n.grey[100],variant:"h5",fontWeight:"600",children:"Alle Shops"})}),L.map((function(e,t){return(0,R.jsxs)(g.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"4px solid ".concat(n.primary[500]),p:"15px",children:[(0,R.jsxs)(g.Z,{children:[(0,R.jsx)(m.Z,{color:n.greenAccent[500],variant:"h5",fontWeight:"600",children:(0,R.jsx)(Z.Z,{href:"https://".concat(e.ShopName),target:"_blank",rel:"noopener noreferrer",underline:"none",color:n.greenAccent[500],children:e.ShopName})}),(0,R.jsx)(m.Z,{color:n.grey[100],children:e.Country})]}),(0,R.jsx)(g.Z,{color:n.grey[100],children:e.Year}),(0,R.jsxs)(g.Z,{backgroundColor:n.greenAccent[500],p:"5px 10px",borderRadius:"4px",color:"black",children:[e.Revenue," Mio. \u20ac"]})]},"".concat(e.ShopName,"-").concat(t))}))]}),(0,R.jsx)(g.Z,{}),(0,R.jsxs)(g.Z,{gridColumn:"span 5",gridRow:"span 2",backgroundColor:n.primary[400],p:"30px",height:"450px",boxShadow:1,borderRadius:"10px",children:[(0,R.jsx)(m.Z,{variant:"h5",fontWeight:"600",children:"Funnel Chart"}),(0,R.jsx)(g.Z,{height:"400px",mt:"5px",children:(0,R.jsx)(j.Z,{})})]}),(0,R.jsxs)(g.Z,{gridColumn:"span 5",gridRow:"span 2",backgroundColor:n.primary[400],height:"450px",boxShadow:1,borderRadius:"10px",children:[(0,R.jsx)(m.Z,{variant:"h5",fontWeight:"600",sx:{padding:"30px 30px 0 30px"},children:"Pie Chart"}),(0,R.jsx)(g.Z,{height:"400px",mt:"-20px",children:(0,R.jsx)(S.Z,{isDashboard:!0})})]})]})]})}},8439:function(e,n,t){var r=t(4836);n.Z=void 0;var o=r(t(5649)),a=t(184),i=(0,o.default)((0,a.jsx)("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zm-8 2V5h2v6h1.17L12 13.17 9.83 11H11zm-6 7h14v2H5z"}),"DownloadOutlined");n.Z=i}}]);
//# sourceMappingURL=667.bb972f00.chunk.js.map